version: 2
updates:
# Update rule for lockfiles only: will bump requirements within the
# compatible versions found in pyproject.toml
- package-ecosystem: pip
  directory: "./pydatalab"
  schedule:
    interval: monthly
    day: monday
    time: "05:43"
  # Needs to be larger than the number of total requirements (currently 31)
  open-pull-requests-limit: 50
  target-branch: main
  labels:
  - dependency_updates
  versioning-strategy: "lockfile-only"
  groups:
    python-dependencies-compat:
      applies-to: version-updates
      dependency-type: production
# Will make a separate PR to bump versions explicitly to the latest versions, in all cases
# May trigger incompatibilities in many cases, in which case additional constraints may be needed here
- package-ecosystem: pip
  directory: "./pydatalab"
  schedule:
    interval: monthly
    day: monday
    time: "05:43"
  # Needs to be larger than the number of total requirements (currently 31)
  open-pull-requests-limit: 50
  target-branch: main
  labels:
  - dependency_updates
  # Turn off automatic rebases so that auto-merge can work without needed N**2 CI runs
  rebase-strategy: "disabled"
  groups:
    python-dependencies:
      applies-to: version-updates
      dependency-type: production
    python-dependencies-dev:
      applies-to: version-updates
      dependency-type: development
    python-dependencies-security:
      applies-to: security-updates
      dependency-type: production
# Updates GH actions versions as often as needed
- package-ecosystem: github-actions
  directory: "/"
  schedule:
    day: monday
    interval: monthly
    time: "05:33"
  target-branch: main
  labels:
  - CI
  - dependency_updates
  groups:
    github-actions:
      applies-to: version-updates
      dependency-type: production
